# 069 Colorful Blocks 2

## 解法
左から順にブロックを塗っていこうと考えます. 一番左のブロックを塗る際には他のブロックによる制約がないので, K通りの色を塗ることができます. 2つめのブロックを塗る際には「1つめのブロック」と同じ色以外を塗ってよいので, (K-1)通りの塗り方があります. 3つめ以降については, 「一つ左のブロック」「二つ左のブロック」の色を避けるので(K-2)通りの塗り方があります.
従って, 答えは`K * (K-1) * (K-2) * (K-2) * (K-2) * ... * (K-2)`すなわち`K * (K-1) * pow(K-2, N-2)`のようになることが分かりますが, 愚直に掛け算をするとO(N)かかって間に合いません(`pow`は累乗を表す関数). そこで繰り返し二乗法というアルゴリズムを利用します.
繰り返し二乗法とは, `pow(a, n*2) == pow(a*a, n)`であることを活かして累乗計算をO(logN)で済ませるテクニックのことです. これを利用することで, N=1e18という大きな値に対しても十分高速に動作するようになります.

なお, 剰余類における演算をライブラリ化した[`ModInt`](https://github.com/NASU41/AtCoderLibraryForJava/tree/master/ModInt)にはこの処理が実装されています. これを呼び出すことで正しい計算が実行できるため, 解答例ではこれを利用しています.