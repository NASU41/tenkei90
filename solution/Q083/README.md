# 083 Colorful Graph

## 解法
しばらく考えると, 次の2通りの解法が浮かんでくるかと思います.

<dl>
  <dt>配るクエリ処理</dt>
  <dd> クエリが与えられるたびに, 愚直に全ての隣接頂点を塗り替える. 頂点の色を出力する際は, 今塗られている色をそのまま確認できる. この方法だと, 塗り替えでO(N*M)時間かかってしまいそう. </dd>
  <dt>もらうクエリ処理</dt>
  <dd> クエリが与えられるたびに, その頂点にクエリ履歴を記録する. 頂点の色を出力する際は, 周囲の頂点のクエリ履歴を確認して, 最新のものを反映する. この方法だと, 色出力でO(N*M)時間かかってしまいそう. </dd>
</dl>

2つを見比べると, 得意分野が分かれているような印象を受けます. そこで, 2つの「いいとこどり」ができないか考えてみます. 
次数が小さい頂点に与えられた色確認クエリはもらう方式で, 次数が大きい頂点に与えられた色確認クエリは, 配る方式で処理するとちょうどよく計算時間をおさえることができそうです.
「次数が大きい/小さい」については, 例えば「√M」などを基準値として分けるとうまくいきます. 

