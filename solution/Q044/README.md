# Q044 Shift and Swapping

## 解法
「shift」操作と「swap」操作を両立できるデータ構造を考える問題です. ここでは, できるだけ見た目と実体が一致するような実装として「両端にメモリ的余裕を持たせた配列」を用いた方法をとりました.

内部実装として, `ShiftSwapArray`には配列本体`a`の他に変数`l`と`r`を保持しています. これらの変数は, `a[l], a[l+1], ..., a[r-1]`のみが本来の配列に対応する有効なデータであることを示しています. これを用いると, 元の配列の第`i`項(in 0-indexed)は`a[l+i]`に対応することが分かります. 「末尾の値を取り除いて先頭に加える」「特定indexの値を書き換える」といった操作もそれぞれO(1)で可能です.
なお, 配列として最初に確保した長さ(答案では100万)からはみ出すような操作を行うと当然`RE`が生えます. そうならないようにクエリの個数を見て十分な長さを確保しておきましょう. (実務で用いるような安全性が求められるデータ構造としては, はみ出ることを検知したタイミングで最初からオブジェクトを作りなおすという手法もよくとられるようです)
