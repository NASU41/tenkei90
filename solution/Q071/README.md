# 071 Fuzzy Priority

## 注意
本フォルダ内にはJavaファイルが2つ存在しますが, 問題071への解答ファイルは`Main.java`のみです. `Test.java`は問題の考察において重要(そう)な実験を行ったファイルであり, 問題自体に回答するものではありません.

## 解法
公式解説で「別解」として紹介されていた解法です. トポロジカルソートに基づいて順列を生成すると条件を満たしますが, 「条件を満たすような順列をランダムに生成し, 既存の解と一致していなければ解に加える」という操作を制限時間いっぱいまで繰り返すと「十分高い確率」でACを得ることができます.

...と公式解説には書かれているのですが, 実は実装したNASU41はなぜこれでうまくいくのか納得がいっていません. 提出コードに手を加えてN=100000と固定した上で「順列が生成された回数」を計測したところ, およそ20~30回程度でした. ここで,
- K=10
- 条件を満たす順列はちょうど10通りある(=全パターン見つけないとACにならない)
- solve関数は1回呼ぶごとに条件を満たす順列をランダムに1つ返す関数である. L回まで呼べる
という状況を仮定すると, `AC`を取れる確率をLの式として計算できます(包除原理を使うと実装できます. `Test.java`参照)が, L=30のときでAC率は62%と, とても実用に耐えるレベルとは思えません. なぜACが取れたのでしょうか...

補足情報出せる方がいらっしゃいましたら, [NASU41のツイッター](twitter.com/skkytkstexhk)までお知らせください.